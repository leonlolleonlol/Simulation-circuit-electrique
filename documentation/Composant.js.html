<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Composant.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/leonlolleonlol/Simulation-circuit-electrique" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Classes</h3><ul><li><a href="Ampoule.html">Ampoule</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Ampoule.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#setProchaineComposante">setProchaineComposante</a></li></ul></li><li><a href="Batterie.html">Batterie</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Batterie.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#setProchaineComposante">setProchaineComposante</a></li></ul></li><li><a href="Circuit.html">Circuit</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Circuit.html#ajouterComposante">ajouterComposante</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#connectComposante">connectComposante</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#echangerComposantes">echangerComposantes</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#getCircuit">getCircuit</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#getCircuits">getCircuits</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#getTypeDeCircuit">getTypeDeCircuit</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#noeudEq">noeudEq</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#rearrangerArrayCircuit">rearrangerArrayCircuit</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#remplirCondensateursAvecCharge">remplirCondensateursAvecCharge</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#remplirResisteursAvecCourant">remplirResisteursAvecCourant</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#retirerComposante">retirerComposante</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#setSymbol">setSymbol</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#solveCourrantkirchhoff">solveCourrantkirchhoff</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#trouverEq">trouverEq</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#trouverPile">trouverPile</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#trouverTypeDeCircuit">trouverTypeDeCircuit</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#update">update</a></li></ul></li><li><a href="Composant.html">Composant</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Composant.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Composant.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Composant.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Composant.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Composant.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Composant.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Composant.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Composant.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Composant.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Composant.html#setProchaineComposante">setProchaineComposante</a></li></ul></li><li><a href="Condensateur.html">Condensateur</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Condensateur.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#setProchaineComposante">setProchaineComposante</a></li></ul></li><li><a href="Diode.html">Diode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Diode.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Diode.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Diode.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Diode.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Diode.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Diode.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Diode.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Diode.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Diode.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Diode.html#setProchaineComposante">setProchaineComposante</a></li></ul></li><li><a href="Fil.html">Fil</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Fil.html#angle">angle</a></li><li data-type='method' style='display: none;'><a href="Fil.html#getFunction">getFunction</a></li><li data-type='method' style='display: none;'><a href="Fil.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Fil.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Fil.html#inBoxBounds">inBoxBounds</a></li><li data-type='method' style='display: none;'><a href="Fil.html#intersection">intersection</a></li><li data-type='method' style='display: none;'><a href="Fil.html#longueur">longueur</a></li><li data-type='method' style='display: none;'><a href="Fil.html#overlap">overlap</a></li><li data-type='method' style='display: none;'><a href="Fil.html#pente">pente</a></li><li data-type='method' style='display: none;'><a href="Fil.html#trierPoint">trierPoint</a></li></ul></li><li><a href="Noeuds.html">Noeuds</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Noeuds.html#ajouterComposante">ajouterComposante</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#maille">maille</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#remplirCondensateursAvecTension">remplirCondensateursAvecTension</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#remplirResisteursAvecDifTension">remplirResisteursAvecDifTension</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#setProchaineComposante">setProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#trouverEq">trouverEq</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#trouverTypeDeCircuit">trouverTypeDeCircuit</a></li></ul></li><li><a href="Resisteur.html">Resisteur</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Resisteur.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#setProchaineComposante">setProchaineComposante</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#AMPOULE">AMPOULE</a></li><li><a href="global.html#BAS">BAS</a></li><li><a href="global.html#BATTERIE">BATTERIE</a></li><li><a href="global.html#CIRCUIT">CIRCUIT</a></li><li><a href="global.html#CONDENSATEUR">CONDENSATEUR</a></li><li><a href="global.html#CREATE">CREATE</a></li><li><a href="global.html#DIODE">DIODE</a></li><li><a href="global.html#DROITE">DROITE</a></li><li><a href="global.html#FIL">FIL</a></li><li><a href="global.html#FunctionObject">FunctionObject</a></li><li><a href="global.html#GAUCHE">GAUCHE</a></li><li><a href="global.html#HAUT">HAUT</a></li><li><a href="global.html#MODIFIER">MODIFIER</a></li><li><a href="global.html#NOEUD">NOEUD</a></li><li><a href="global.html#POINT">POINT</a></li><li><a href="global.html#QUADRILLE">QUADRILLE</a></li><li><a href="global.html#QUADRILLEPOINT">QUADRILLEPOINT</a></li><li><a href="global.html#RESISTEUR">RESISTEUR</a></li><li><a href="global.html#SUPPRIMER">SUPPRIMER</a></li><li><a href="global.html#addActions">addActions</a></li><li><a href="global.html#ajustementAutomatiqueComposant">ajustementAutomatiqueComposant</a></li><li><a href="global.html#ajustementAutomatiqueFil">ajustementAutomatiqueFil</a></li><li><a href="global.html#ampoule">ampoule</a></li><li><a href="global.html#appliquerTransformation">appliquerTransformation</a></li><li><a href="global.html#applyLimitActions">applyLimitActions</a></li><li><a href="global.html#batterie">batterie</a></li><li><a href="global.html#blendBG">blendBG</a></li><li><a href="global.html#circuitMaille">circuitMaille</a></li><li><a href="global.html#condensateur">condensateur</a></li><li><a href="global.html#copyComposant">copyComposant</a></li><li><a href="global.html#couperFil">couperFil</a></li><li><a href="global.html#createColorGradient">createColorGradient</a></li><li><a href="global.html#diode">diode</a></li><li><a href="global.html#draw">draw</a></li><li><a href="global.html#drawComponentsChooser">drawComponentsChooser</a></li><li><a href="global.html#drawFils">drawFils</a></li><li><a href="global.html#drawGrid">drawGrid</a></li><li><a href="global.html#drawNoeuds">drawNoeuds</a></li><li><a href="global.html#filStart">filStart</a></li><li><a href="global.html#findGridLock">findGridLock</a></li><li><a href="global.html#getAllConnection">getAllConnection</a></li><li><a href="global.html#getConnectingComposant">getConnectingComposant</a></li><li><a href="global.html#getPossibleConnections">getPossibleConnections</a></li><li><a href="global.html#getStringData">getStringData</a></li><li><a href="global.html#inGrid">inGrid</a></li><li><a href="global.html#initDrag">initDrag</a></li><li><a href="global.html#isElementDrag">isElementDrag</a></li><li><a href="global.html#isElementSelectionner">isElementSelectionner</a></li><li><a href="global.html#lineGrid">lineGrid</a></li><li><a href="global.html#load">load</a></li><li><a href="global.html#loadLocalCircuit">loadLocalCircuit</a></li><li><a href="global.html#mouseDragged">mouseDragged</a></li><li><a href="global.html#mousePressed">mousePressed</a></li><li><a href="global.html#mouseReleased">mouseReleased</a></li><li><a href="global.html#mouseWheel">mouseWheel</a></li><li><a href="global.html#pointGrid">pointGrid</a></li><li><a href="global.html#posAtPercent">posAtPercent</a></li><li><a href="global.html#redo">redo</a></li><li><a href="global.html#resetHistorique">resetHistorique</a></li><li><a href="global.html#resisteur">resisteur</a></li><li><a href="global.html#sauvegarder">sauvegarder</a></li><li><a href="global.html#selectionBox">selectionBox</a></li><li><a href="global.html#setModificationFilPos">setModificationFilPos</a></li><li><a href="global.html#setTooltip">setTooltip</a></li><li><a href="global.html#splitFil">splitFil</a></li><li><a href="global.html#telecharger">telecharger</a></li><li><a href="global.html#undo">undo</a></li><li><a href="global.html#updateBouton">updateBouton</a></li><li><a href="global.html#updateFilPos">updateFilPos</a></li><li><a href="global.html#updateNoeud">updateNoeud</a></li><li><a href="global.html#upload">upload</a></li><li><a href="global.html#validBoutonActif">validBoutonActif</a></li><li><a href="global.html#validComposantPos">validComposantPos</a></li><li><a href="global.html#validFilBegin">validFilBegin</a></li><li><a href="global.html#validerAction">validerAction</a></li><li><a href="global.html#verifierCouperFil">verifierCouperFil</a></li><li><a href="global.html#verifierCouperNoeud">verifierCouperNoeud</a></li><li><a href="global.html#verifierSplitNewComposant">verifierSplitNewComposant</a></li><li><a href="global.html#windowResized">windowResized</a></li><li><a href="global.html#zoom">zoom</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">Composant.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>

/** 
 * Classe pour le modèle de vue. C'est aussi utilisé présentement pour les calculs.
 * Elle rassemble toute les méthodes et les attribut pour dessiner un composant sur le
 * canvas. Pour modifier si l'on veut dessiner un condensateur ou un resisteur,
 * on modifie l'attribut `type` du composant. Il est par contre important d'utiliser la 
 * méthode {@link setObjectType} puisque d'autre attributs sont calculé selon celui-ci
 */
class Composant {

  /**
   * Créer un composant avec une position, des valeurs mathématique =0 et un identifiant unique
   * @param {number} [x] 
   * @param {number} [y]
   * @param {string} type
   * @param {number} [orientation = 0]
   */
  constructor(type, x = 0, y = 0, orientation = 0) {
    //information importante pour la sauvegarde
    this.id = Date.now();// Donne un identifiant unique à chaque composant
    this.x = x;
    this.y = y;
    this.orientation = orientation;

    Composant.setObjectType(this, type);

    // Inoformation pour les calculs
    this.courant = 0;
    this.tension = 0;
    this.prochaineComposante = [];
    this.composantePrecedente = [];
    this.dejaPasser = false;
  }
  /**
   * Permet de calculer si un cordonné (x, y) se situe dans le périmètre de contact 
   * du composant.
   * @abstract
   * @param {number} x cordonné x
   * @param {number} y cordonné y
   * @returns {boolean}
   */
  inBounds(x, y) {
    return rectInBound(x, y);
  }

  /**
   * Chaque composant possède deux borne opposé qui sont les connections avec les fils. Cette fonction 
   * permet de faire vérfifier si une position entre en contact avec une des bornes.
   * @param {number} x cordonné x
   * @param {number} y cordonné y
   * @param {number} approximation rayon d'approximation permis
   * @returns {boolean} si une borne est touché par le point
   * @see Composant#getBorne simplification de la fonction
   */
  checkConnection(x, y, approximation) {
    return this.getBorne(x, y, approximation) != null;
  }
  /**
   * Fonction qui permet de récupérer les positions x et y des bornes. Cette fonction dépend 
   * de l'orientation du composant.
   * @returns Les positions des bornes trier en ordre de grandeur du composant
   */
  getConnections() {
    let pos;
    if (this.orientation % PI == 0) {
      pos = [{ x: this.x + 60 / 2, y: this.y }, { x: this.x - 60 / 2, y: this.y }];
      pos.sort(function (a, b) { return a.x - b.x });
    } else if (this.orientation % HALF_PI == 0) {
      pos = [{ x: this.x, y: this.y + 60 / 2 }, { x: this.x, y: this.y - 60 / 2 }];
      pos.sort(function (a, b) { return a.y - b.y });
    }
    return pos;
  }

  /**
   * Cette fonction est équivalente avec getConnections sauf que tu peux préciser une
   * borne spécifique à récupérer.
   * @param {Pos} borne Une borne spécifique (HAUT, BAS, GAUCHE, DROITE)
   * @returns La position de la connexion
   */
  getConnection(borne) {
    let connections = this.getConnections();
    return (borne == GAUCHE || borne == HAUT)
      ? connections[0] : connections[1];
  }

  /**
   * Retourne une borne à quelle  une position x y touche. La position retourner n'est pas (x, y)
   * mais c'est juste savoir si la borne touché est en haut, en bas, à droite ou à gauche.
   * @param {number} x 
   * @param {number} y 
   * @param {number} [approximation = 0] 
   * @returns La borne revoie le position relative touché ou sinon undefined
   */
  getBorne(x, y, approximation = 0) {
    if (this.orientation % PI == 0) {
      if (dist(this.x + 60 / 2, this.y, x, y) &lt;= approximation)
        return DROITE;
      else if (dist(this.x - 60 / 2, this.y, x, y) &lt;= approximation)
        return GAUCHE;
    } else if (this.orientation % HALF_PI == 0) {
      if (dist(this.x, this.y + 60 / 2, x, y) &lt;= approximation)
        return BAS;
      else if (dist(this.x, this.y - 60 / 2, x, y) &lt;= approximation)
        return HAUT;
    }
  }

  /**
   * 
   * @param {boolean} inverse 
   */
  rotate(inverse) {
    this.orientation = (this.orientation + (inverse ? -HALF_PI : HALF_PI)) % TWO_PI
  }
  /**
   * Donne à prochaineComposante la valeur passée en paramètre
   * @param {*} composante 
   */
  setProchaineComposante(composante) {
    this.prochaineComposante = composante;
  }

  /**
   * Retourne la valeur de la prochaine composante à la position 0 de l'array prochaineComposante.
   * @returns 
   */
  getProchaineComposante() {
    return this.prochaineComposante[0];
  }

  /** Getter pour le type de composant
   * @returns le type de composant
   */
  getType() {
    return this.type;
  }

  /**
   * Le titre utilisé pour l'affichage
   */
  getTitle() {
    return this.titre;
  }

  static setObjectType(composant, type) {
    composant.type = type;
    let info = getContextObject(type);
    if (info.radius == null) {
      composant.width = 60;
      composant.height = info.height;
    } else composant.radius = info.radius;
    if (info.inBoundsType == 'round') {
      composant.inBounds = roundInBound;
    } else composant.inBounds = rectInBound;//pour éviter erreur par défaux roudInBound
    composant.titre = info.titre;
  }
}

/** 
 * @extends Composant 
 * @deprecated
 */
class Resisteur extends Composant {
  constructor(x, y, resistance, orientation) {
    super(RESISTEUR, x, y, orientation);
    this.resistance = resistance;
  }
  getEq(sens) {
    return (sens ? '-' : '') + this.resistance + this.symbole;
  }
}


/**
 * Représentation d'une ampoule
 * @extends Composant 
 * @deprecated
 */
class Ampoule extends Resisteur {
  constructor(x, y, resistance, orientation) {
    super(x, y, resistanc, orientation);
    Composant.setObjectType(this, AMPOULE);
  }
}

/**
 * Représentation du condensateur
 * @extends Composant 
 * @deprecated Cet objet n'est **PAS** implémenter à cause du problème des circuits RC
 */
class Condensateur extends Composant {
  constructor(x, y, capacite, orientation) {
    super(CONDENSATEUR, x, y, orientation);
    this.capacite = capacite;
    this.charge = 0;
  }
}

/**
 * Représentation d'une source de courant (batterie)
 * @extends Composant 
 * @deprecated
 */
class Batterie extends Composant {
  constructor(x, y, tension, orientation) {
    super(x, y, BATTERIE, orientation);
    this.tension = tension;
  }
  getEq(sens) {
    return (this.orientaion % PI === 0 || sens) &amp;&amp; !(this.orientaion % PI === 0 &amp;&amp; sens) ? -this.tension : this.tension;
  }
}

/**
 * Représentation d'une diode
 * @extends Composant 
 * @deprecated Pour l'instant l'objet n'est **PAS** accessible puisque les calculs se complexifie
 * beaucoup si on implémentait la diode
 */
class Diode extends Composant {
  constructor(x, y, orientation) {
    super(x, y, 38, 38, DIODE, orientation);
    this.radius = 19;
  }
}

/**
 * Cette classe est une représentation mathématique de la dérivation de brache (branche en parallèle). 
 * Elle rassemble donc toute les branches en parallèle et cela permet de faire les calculs 
 * d'équivalence du circuit et autre.
 * @extends Composant 
 */
class Noeuds extends Composant {
  constructor(x, y) {
    super(x, y, 0, 0, NOEUD, 'Noeud', 0);
    this.circuitsEnParallele = []; //Array de Circuit qui sont en parallèle (Ceux en série sont dans la class Circuit())

    //C'est variable sont utile pour calculer l'équivalence du noeud
    this.capaciteEQ = 0;
    this.resistanceEQ = 0;
    this.tensionEQ = 0;

    //Sert stocker le type de circuit. AKA -> seulement des résistances, seulement des condensateurs ou RC.
    this.type = '';
    this.titre = 'Nœud'

    //Indique si le courant à un chemin pour passer dans au moins une des branches
    this.valide = false; //On assume que c'est faux, mais si une des branches est valide, on le met vrai.
  }


  /**
   * Ajoute un circuit dans l'array de circuit du noeud.
   * @param {*} composant 
   */
  ajouterComposante(composant) {
    this.circuitsEnParallele.push(composant);
  }

  retirerCircuit(position) {
    this.circuitsEnParallele.splice(position, 1);
  }
  /**
   * Sert à faire les calculs reliés au noeud. Donc les calculs pour les circuits en parallèle se font ici.
   */

  trouverEq() {
    for (const circuit of this.circuitsEnParallele) {
      circuit.trouverEq();
      if (circuit.valide) {
      }
    }

    this.trouverTypeDeCircuit();
    switch (this.type) {
      case SEULEMENTR:
        let resistanceTemp = 0;
        for (const circuit of this.circuitsEnParallele) {
          resistanceTemp += 1 / circuit.resistanceEQ;
        }
        this.resistanceEQ = (1 / resistanceTemp).round(2);
        break;
      case SEULEMENTC:
        for (const circuit of this.circuitsEnParallele) {
          this.capaciteEQ += circuit.capaciteEQ;
        }
        break;
      case RC:
        //C'est là que c'est difficile
        break;
    }
  }

  /**
   * Trouve le type du noeud et le garde en mémoire dans la variable "type" du noeud
   */
  trouverTypeDeCircuit() {
    let circuitR = this.circuitsEnParallele.some(circuit => circuit.getTypeDeCircuit() === SEULEMENTR);
    let circuitC = this.circuitsEnParallele.some(circuit => circuit.getTypeDeCircuit() === SEULEMENTC);
    let circuitRC = this.circuitsEnParallele.some(circuit => circuit.getTypeDeCircuit() === RC);

    if ((circuitR &amp;&amp; circuitC) || circuitRC) {
      this.type = RC;
    } else if (circuitC) {
      this.type = SEULEMENTC;
    } else this.type = SEULEMENTR;
  }

  checkConnection(x, y, aproximation) {
    return false;
  }

  /**
   * Pour chaque circuit dans l'array de circuit en parallèle, on calcul le nouveau courant et on le distribut dans les résistances
   */
  remplirResisteursAvecDifTension() {
    for (const circuit of this.circuitsEnParallele) {
      circuit.courant = this.tensionEQ / circuit.resistanceEQ;
      circuit.remplirResisteursAvecCourant();
    }
  }

  /**
   * Pour chaque circuit dans l'array de circuit en parallèle, on calcul la nouvelle charge et on le distribut dans les condensateurs
   */
  remplirCondensateursAvecTension() {
    for (const circuit of this.circuitsEnParallele) {
      circuit.charge = circuit.capaciteEQ * this.tensionEQ;
      circuit.remplirCondensateursAvecCharge();
    }
  }

  /**
   * Continue la maille écrite en séparant la maille pour toute ses branches. Aussi, fait l'inventaire
   * des mailles internes
   * @param {Circuit} composants Liste de composante globale
   * @param {Array} mailles Liste de mailles qui va enregistrer les mailles au fur et à mesure de
   * l'itération dans la branche ou noeud.
   * @param {Array} maille Maille présentement écrite
   * @param {number} index L'index du noeud dans le circuit parent
   */
  maille(composants, mailles, maille, index, inverse) {
    for (const element of this.circuitsEnParallele) {
      circuitMaille(element.circuit.concat(composants.slice(index + 1)), mailles,
        [...maille], inverse, -1);
    }
    // Trouver les mailles interne
    for (let i = 0; i &lt; this.circuitsEnParallele.length - 1; i++) {
      const branch = this.circuitsEnParallele[i].circuit;
      for (let j = i + 1; j &lt; this.circuitsEnParallele.length; j++) {
        const reverseBranch = this.circuitsEnParallele[j].circuit.reverse();
        circuitMaille(branch.concat(reverseBranch), mailles, [], !inverse, branch.length);
      }
    }
  }
  /**
   * Retourne le type de l'objet
   * @returns 
   */
  getType() {
    return NOEUD;
  }
}
/**
 * Vérifie si un nouveau composant ou un composant que l'on a modifier a une position valide. 
 * Les critères sont que le composant se situe dans la grille et qu'il ne connecte pas
 * avec les bornes d'un composant
 * @param {Composant} composant Le composant que l'on veut valider la position
 * @returns Si la position du composant est valide
 */
function validComposantPos(composant) {
  if (!inGrid(composant.x + grid.translateX, composant.y + grid.translateY))
    return false;
  return !components.some(element => element.checkConnection(composant.x, composant.y, 1) || composant.checkConnection(element.x, element.y, 1));
}

function rectInBound(x, y) {
  if (this.orientation % PI === 0)
    return x >= this.x - this.width / 2 &amp;&amp; x &lt;= this.x + this.width / 2 &amp;&amp;
      y >= this.y - this.height / 2 &amp;&amp; y &lt;= this.y + this.height / 2;
  else if (this.orientation % HALF_PI === 0)
    return x >= this.x - this.height / 2 &amp;&amp; x &lt;= this.x + this.height / 2 &amp;&amp;
      y >= this.y - this.width / 2 &amp;&amp; y &lt;= this.y + this.width / 2;
  else {
    let taille = Math.max(this.width, this.height);
    return x >= this.x - taille / 2 &amp;&amp; x &lt;= this.x + taille / 2 &amp;&amp;
      y >= this.y - taille / 2 &amp;&amp; y &lt;= this.y + taille / 2;
  }
}

function roundInBound(x, y) {
  return x >= this.x - this.radius &amp;&amp; x &lt;= this.x + this.radius &amp;&amp;
    y >= this.y - this.radius &amp;&amp; y &lt;= this.y + this.radius;
}


function getContextObject(type) {
  switch (type) {
    case RESISTEUR: return resisteurStaticInfo;
    case AMPOULE: return ampouleStaticInfo;
    case CONDENSATEUR: return condensateurStaticInfo;
    case DIODE: return diodeStaticInfo;
    case BATTERIE: return batterieStaticInfo;
    default: throw 'Le type n\'est pas supporté';
  }
}

const resisteurStaticInfo = Object.freeze({
  titre: 'Résisteur',
  height: 25,
  inBoundsType: 'rect',
});

const ampouleStaticInfo = Object.freeze({
  titre: 'Ampoule',
  height: 22,
  inBoundsType: 'rect',
});

const condensateurStaticInfo = Object.freeze({
  titre: 'Condensateur',
  height: 30,
  inBoundsType: 'rect',
});;

const batterieStaticInfo = Object.freeze({
  titre: 'Batterie',
  height: 30,
  inBoundsType: 'rect',
});;

const diodeStaticInfo = Object.freeze({
  titre: 'Diode',
  radius: 19,
  inBoundsType: 'round',
});;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Mon May 22 2023 21:44:06 GMT-0400 (Eastern Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
