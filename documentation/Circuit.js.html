<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Circuit.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/leonlolleonlol/Simulation-circuit-electrique" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Classes</h3><ul><li><a href="Ampoule.html">Ampoule</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Ampoule.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#draw">draw</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Ampoule.html#setProchaineComposante">setProchaineComposante</a></li></ul></li><li><a href="Batterie.html">Batterie</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Batterie.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#draw">draw</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Batterie.html#setProchaineComposante">setProchaineComposante</a></li></ul></li><li><a href="Circuit.html">Circuit</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Circuit.html#ajouterComposante">ajouterComposante</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#connectComposante">connectComposante</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#echangerComposantes">echangerComposantes</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#getCircuit">getCircuit</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#getCircuits">getCircuits</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#getTypeDeCircuit">getTypeDeCircuit</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#noeudEq">noeudEq</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#rearrangerArrayCircuit">rearrangerArrayCircuit</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#remplirCondensateursAvecCharge">remplirCondensateursAvecCharge</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#remplirResisteursAvecCourant">remplirResisteursAvecCourant</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#retirerComposante">retirerComposante</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#setSymbol">setSymbol</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#solveCourrantkirchhoff">solveCourrantkirchhoff</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#trouverEq">trouverEq</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#trouverPile">trouverPile</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#trouverTypeDeCircuit">trouverTypeDeCircuit</a></li><li data-type='method' style='display: none;'><a href="Circuit.html#update">update</a></li></ul></li><li><a href="Composant.html">Composant</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Composant.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Composant.html#draw">draw</a></li><li data-type='method' style='display: none;'><a href="Composant.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Composant.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Composant.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Composant.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Composant.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Composant.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Composant.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Composant.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Composant.html#setProchaineComposante">setProchaineComposante</a></li></ul></li><li><a href="Condensateur.html">Condensateur</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Condensateur.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#draw">draw</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Condensateur.html#setProchaineComposante">setProchaineComposante</a></li></ul></li><li><a href="Diode.html">Diode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Diode.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Diode.html#draw">draw</a></li><li data-type='method' style='display: none;'><a href="Diode.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Diode.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Diode.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Diode.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Diode.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Diode.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Diode.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Diode.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Diode.html#setProchaineComposante">setProchaineComposante</a></li></ul></li><li><a href="Fil.html">Fil</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Fil.html#angle">angle</a></li><li data-type='method' style='display: none;'><a href="Fil.html#draw">draw</a></li><li data-type='method' style='display: none;'><a href="Fil.html#getFunction">getFunction</a></li><li data-type='method' style='display: none;'><a href="Fil.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Fil.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Fil.html#inBoxBounds">inBoxBounds</a></li><li data-type='method' style='display: none;'><a href="Fil.html#intersection">intersection</a></li><li data-type='method' style='display: none;'><a href="Fil.html#longueur">longueur</a></li><li data-type='method' style='display: none;'><a href="Fil.html#overlap">overlap</a></li><li data-type='method' style='display: none;'><a href="Fil.html#pente">pente</a></li><li data-type='method' style='display: none;'><a href="Fil.html#trierPoint">trierPoint</a></li></ul></li><li><a href="Noeuds.html">Noeuds</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Noeuds.html#ajouterComposante">ajouterComposante</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#draw">draw</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#maille">maille</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#remplirCondensateursAvecTension">remplirCondensateursAvecTension</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#remplirResisteursAvecDifTension">remplirResisteursAvecDifTension</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#setProchaineComposante">setProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#trouverEq">trouverEq</a></li><li data-type='method' style='display: none;'><a href="Noeuds.html#trouverTypeDeCircuit">trouverTypeDeCircuit</a></li></ul></li><li><a href="Resisteur.html">Resisteur</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Resisteur.html#checkConnection">checkConnection</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#draw">draw</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#getBorne">getBorne</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#getConnection">getConnection</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#getConnections">getConnections</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#getProchaineComposante">getProchaineComposante</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#getTitle">getTitle</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#getType">getType</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#inBounds">inBounds</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="Resisteur.html#setProchaineComposante">setProchaineComposante</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#AMPOULE">AMPOULE</a></li><li><a href="global.html#BAS">BAS</a></li><li><a href="global.html#BATTERIE">BATTERIE</a></li><li><a href="global.html#CIRCUIT">CIRCUIT</a></li><li><a href="global.html#CONDENSATEUR">CONDENSATEUR</a></li><li><a href="global.html#CREATE">CREATE</a></li><li><a href="global.html#DIODE">DIODE</a></li><li><a href="global.html#DROITE">DROITE</a></li><li><a href="global.html#FIL">FIL</a></li><li><a href="global.html#FunctionObject">FunctionObject</a></li><li><a href="global.html#GAUCHE">GAUCHE</a></li><li><a href="global.html#HAUT">HAUT</a></li><li><a href="global.html#MODIFIER">MODIFIER</a></li><li><a href="global.html#NOEUD">NOEUD</a></li><li><a href="global.html#POINT">POINT</a></li><li><a href="global.html#QUADRILLE">QUADRILLE</a></li><li><a href="global.html#QUADRILLEPOINT">QUADRILLEPOINT</a></li><li><a href="global.html#RESISTEUR">RESISTEUR</a></li><li><a href="global.html#SUPPRIMER">SUPPRIMER</a></li><li><a href="global.html#addActions">addActions</a></li><li><a href="global.html#ajustementAutomatiqueComposant">ajustementAutomatiqueComposant</a></li><li><a href="global.html#ajustementAutomatiqueFil">ajustementAutomatiqueFil</a></li><li><a href="global.html#ampoule">ampoule</a></li><li><a href="global.html#appliquerTransformation">appliquerTransformation</a></li><li><a href="global.html#applyLimitActions">applyLimitActions</a></li><li><a href="global.html#batterie">batterie</a></li><li><a href="global.html#blendBG">blendBG</a></li><li><a href="global.html#circuitMaille">circuitMaille</a></li><li><a href="global.html#condensateur">condensateur</a></li><li><a href="global.html#copyComposant">copyComposant</a></li><li><a href="global.html#couperFil">couperFil</a></li><li><a href="global.html#createColorGradient">createColorGradient</a></li><li><a href="global.html#diode">diode</a></li><li><a href="global.html#draw">draw</a></li><li><a href="global.html#drawComponentsChooser">drawComponentsChooser</a></li><li><a href="global.html#drawComposants">drawComposants</a></li><li><a href="global.html#drawFils">drawFils</a></li><li><a href="global.html#drawGrid">drawGrid</a></li><li><a href="global.html#drawNoeuds">drawNoeuds</a></li><li><a href="global.html#filStart">filStart</a></li><li><a href="global.html#findGridLock">findGridLock</a></li><li><a href="global.html#getAllConnection">getAllConnection</a></li><li><a href="global.html#getComposantVide">getComposantVide</a></li><li><a href="global.html#getConnectingComposant">getConnectingComposant</a></li><li><a href="global.html#getPossibleConnections">getPossibleConnections</a></li><li><a href="global.html#getStringData">getStringData</a></li><li><a href="global.html#inGrid">inGrid</a></li><li><a href="global.html#initDrag">initDrag</a></li><li><a href="global.html#isElementDrag">isElementDrag</a></li><li><a href="global.html#isElementSelectionner">isElementSelectionner</a></li><li><a href="global.html#isPenteConstante">isPenteConstante</a></li><li><a href="global.html#lineGrid">lineGrid</a></li><li><a href="global.html#load">load</a></li><li><a href="global.html#loadLocalCircuit">loadLocalCircuit</a></li><li><a href="global.html#mouseDragged">mouseDragged</a></li><li><a href="global.html#mousePressed">mousePressed</a></li><li><a href="global.html#mouseReleased">mouseReleased</a></li><li><a href="global.html#mouseWheel">mouseWheel</a></li><li><a href="global.html#pointGrid">pointGrid</a></li><li><a href="global.html#posAtPercent">posAtPercent</a></li><li><a href="global.html#redo">redo</a></li><li><a href="global.html#resetHistorique">resetHistorique</a></li><li><a href="global.html#resisteur">resisteur</a></li><li><a href="global.html#sauvegarder">sauvegarder</a></li><li><a href="global.html#selectionBox">selectionBox</a></li><li><a href="global.html#setModificationFilPos">setModificationFilPos</a></li><li><a href="global.html#setTooltip">setTooltip</a></li><li><a href="global.html#splitFil">splitFil</a></li><li><a href="global.html#telecharger">telecharger</a></li><li><a href="global.html#undo">undo</a></li><li><a href="global.html#updateBouton">updateBouton</a></li><li><a href="global.html#updateFilPos">updateFilPos</a></li><li><a href="global.html#updateNoeud">updateNoeud</a></li><li><a href="global.html#validBoutonActif">validBoutonActif</a></li><li><a href="global.html#validComposantPos">validComposantPos</a></li><li><a href="global.html#validFilBegin">validFilBegin</a></li><li><a href="global.html#validerAction">validerAction</a></li><li><a href="global.html#verifierCouperFil">verifierCouperFil</a></li><li><a href="global.html#verifierCouperNoeud">verifierCouperNoeud</a></li><li><a href="global.html#verifierSplitNewComposant">verifierSplitNewComposant</a></li><li><a href="global.html#windowResized">windowResized</a></li><li><a href="global.html#zoom">zoom</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">Circuit.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Cette class contient les méthodes et la liste de composante pour faire les calculs.
 */
 class Circuit{
    /**
     * Initialise toute ce qu'on aura besoin pour les calculs. Si c'est une branche, la variable circuit devient un "children" 
     * de du noeud où qui le contiendra.
     */
    constructor(){
        this.contientPile; 
        this.circuit = []; //Array de composantes qui sont en série dans cet instance(ceux en parallèle sont dans Noeud())
        this.valide = true;
        this.presenceBatterie = false;
        this.index = 0;
        this.arrangerC = false;

        this.courant = 0;
        this.charge = 0;

        //C'est variable sont utile dans le cas où l'instance de cette class est une branche
        this.capaciteEQ = 0;
        this.resistanceEQ = 0;
        this.tensionEQ = 0;
        
        //Sert stocker le type de circuit. AKA -> seulement des résistances, seulement des condensateurs ou RC.
        this.type;
    }

    /**
     * Ajoute une composante dans l'Array du circuit. Initialement, la méthode doit être appelé avec la pile en paramètre, sinon il n'aura
     * pas de pile dans le circuit.
     * @param {*} composant 
     */
    ajouterComposante(composant){
        this.circuit.push(composant);
    }

    /**
     * Connecte deux composantes. L'ordre est important, donc un fil qui passe de la composante1 à la composante2 n'est pas
     * pareil à un fil qui passe de la composante2 à la composante1.
     * @param {*} composanteAvant 
     * @param {*} composanteApres 
     */
    connectComposante(composanteAvant, composanteApres){
        composanteAvant.prochaineComposante.push(composanteApres);
        composanteApres.composantePrecedente.push(composanteAvant);
    }
    
    /**
     * Retire une composante à une certaine position dans l'array
     * @param {*} position 
     */
    retirerComposante(position){
        this.circuit.splice(position, 1);
    }
    
    // https://stackoverflow.com/questions/4011629/swapping-two-items-in-a-javascript-array
    /**
     * Échange la composante à l'index A avec celle de l'index B
     * @param {*} indexA Position de la composante A dans l'array circuit
     * @param {*} indexB Position de la composante B dans l'array circuit
     */  
    echangerComposantes (indexA, indexB) {
        var temp = this.circuit[indexA];
        this.circuit[indexA] = this.circuit[indexB];
        this.circuit[indexB] = temp;
    }
  
    /**
     * La méthode dirige l'ordre d'appelle des méthodes pour que les calculs se passent bien.
     * Elle doit seulement être appelé une fois sur la branche principale quand l'utilisateur pèse sur le bouton Animation.
     */
    update(){
        this.trouverPile();
        this.circuit = this.rearrangerArrayCircuit(this.circuit[0], false).circuit;
        this.trouverEq();
    }

    /**
     * Met la pile à la première position du circuit pour être prêt à réarranger l'array et prépare les calculs reliés à la pile.
     */
    trouverPile(){
        let index = this.circuit.findIndex(element => element.getType() == BATTERIE);
        if(index!=-1){
            this.contientPile = true;
            this.echangerComposantes(index, 0);
            this.tensionEQ = this.circuit[0].tension;
        }
    }

    /**
     * La méthode regarde les connections entre les composantes et les assemblent correctement pour les calculs.
     * @param {*} debutComposant 
     * C'est la composant où le réassemblage va commencer. Si c'est la première fois que la méthode est appelé, la pile doit être mise ici.
     * @param {*} insideNoeud 
     * Indique si la méthode est appelé dans un noeud. Si c'est la première fois que la méthode est appelé, ça doit être false.
     * @returns
     * Retourne une instance de la class Circuit qui contient le circuit réarrangé.
     */
    rearrangerArrayCircuit(debutComposant, insideNoeud){
        let nouvC = new Circuit();
        do{
            if(debutComposant.dejaPasser == false){
                if(debutComposant.prochaineComposante.length > 1){
                    for (const pComposant of debutComposant.prochaineComposante) {
                        debutComposant.ajouterComposante(this.rearrangerArrayCircuit(pComposant, true));
                    }
                }
                if(!(debutComposant.composantePrecedente.length > 1 &amp;&amp; debutComposant.getType() == NOEUD)){
                    nouvC.ajouterComposante(debutComposant); 
                }
                debutComposant.dejaPasser = true;
            }
            debutComposant = debutComposant.getProchaineComposante(); 
        }while((debutComposant.composantePrecedente.length &lt; 2 || !insideNoeud) 
            &amp;&amp; !(debutComposant.getProchaineComposante().getType() == BATTERIE));
        
        if(!insideNoeud){
            nouvC.ajouterComposante(debutComposant);
        }
        return nouvC;
    }

    /**
     * Les calculs se font ici. La méthode trouve un circuit équivalent à celui de l'utilisateur, trouve les valeurs de 
     * la tension et du courant du circuit équivalent et revient avec les bonnes valeurs au circuit de l'utilisateur. La méthode
     * assume que l'array circuit est bien construite et que les valeurs écritent par l'utilisateur sont réalistes.
     */
    trouverEq(){
        this.trouverTypeDeCircuit();
        if(this.valide){
            switch (this.type){
                case SEULEMENTR:
                    for (const element of this.circuit) {
                        if(element.getType() == RESISTEUR || element.getType() == NOEUD){
                            this.resistanceEQ += element.getType() == NOEUD?element.resistanceEQ:element.resistance;
                        }
                    }
                    if(this.contientPile){
                        this.courant = this.tensionEQ / this.resistanceEQ;
                    }
                    this.remplirResisteursAvecCourant();
                    break;
                case SEULEMENTC:
                    let capaciteTemp = 0;
                    for (const element of this.circuit) {
                        if(element.getType() == CONDENSATEUR || element.getType() == NOEUD){
                            capaciteTemp += 1 / (element.getType() == NOEUD ? element.capaciteEQ : element.capacite);
                        }
                    }
                    this.capaciteEQ = (1/capaciteTemp).round(2);
                    if(this.contientPile){
                        this.charge = this.capaciteEQ * this.tensionEQ; 
                        print(this.charge);
                    }
                    this.remplirCondensateursAvecCharge();
                    break;
                case RC:
                    //C'est là que c'est difficile
                    //On peut aussi juste dire que le circuit est invalide.
                    print("Circuit RC détecté"); //(rip)
                    break;
            }
    
            if(this.contientPile){
                print("CapaciteEQ: " + this.capaciteEQ);
                print("ResistanceEQ: " + this.resistanceEQ);
            }
        } else{
            if(this.contientPile){
                print("Pas de chemin pour le courant");
            }
        }
        
    }

    /**
     * Sert à trouver si le circuit contient seulement des Résistances, seulement des Condensateurs ou contient les deux. Devrait
     * changer la variable "type" en la réponse trouvée.
     */
    trouverTypeDeCircuit(){
        let getType = function(element, type ,secondType) {
            if(element.getType()==NOEUD){
                element.trouverEq();
                return element.type === secondType;
            }else return element.getType() === type;
        }
        let circuitR = this.circuit.some(element => getType(element, RESISTEUR, SEULEMENTR));
        let circuitC = this.circuit.some(element => getType(element, CONDENSATEUR, SEULEMENTC));
        let circuitRC = this.circuit.some(element => getType(element, NOEUD, RC));

        if((circuitR &amp;&amp; circuitC) || circuitRC){
            this.type = RC;
        }else if (circuitC){
            this.type = SEULEMENTC;
        }else{
            this.type = SEULEMENTR;
        }
        return this.type;
    }

    /**
     * Retourne le type de l'objet Circuit
     * @returns 
     */
    getType(){
        return CIRCUIT;
    }

    /**
     * Retourne la valeur de la variable "type" du circuit.
     * @returns 
     */
    getTypeDeCircuit(){
        return this.type;
    }

    /**
     * Trouve chaque résisteur et les remplis avec le courant et le deltaV. S'il tombe sur un noeud, il continue les calculs
     * pour les résisteurs dans le noeud.
     */
    remplirResisteursAvecCourant(){
        for (const element of this.circuit){
            if(element.getType() == RESISTEUR){   
                element.courant = this.courant;
                element.tension = this.courant * element.resistance;
            }else if(element.getType() == NOEUD){
                element.tensionEQ = this.courant * element.resistanceEQ;
                element.remplirResisteursAvecDifTension();
            }
        }
    }

     /**
     * Trouve chaque condensateur et les remplis avec la charge et le deltaV. S'il tombe sur un noeud, il continue les calculs
     * pour les condensateurs dans le noeud.
     */
    remplirCondensateursAvecCharge(){
        for (const element of this.circuit) {
            if(element.getType() == CONDENSATEUR){
                element.charge = this.charge;
                element.tension = this.charge / element.capacite;
            }else if(element.getType() == NOEUD){
                element.tensionEQ = this.charge / this.capaciteEQ;
                element.remplirCondensateursAvecTension();
            }
        }  
    }
    /**
     * Retourn l'array contenant chaque composante dans l'array du circuit
     * @returns 
     */
    getCircuit(){
        return this.circuit;
    }

/****************************************************************************************************************************/
/********************************************* Autre façon de faire les calculs *********************************************/
/****************************************************************************************************************************/

    /**
     * Change le symbole de l'instance de la class
     * @param {*} symbole 
     */
    setSymbol(symbole){
        this.symbole = symbole;
        for (const enfant of this.circuit) {
            enfant.symbole = symbole;
        }
    }

    /**
     * Permet de trouver le courant de chaque circuit selon les lois
     * de kirchhoff
     */
    solveCourrantkirchhoff(){
        let circuits = [];
        this.getCircuits(circuits);
        let dictCourrant = new Map();
        for (let i = 0; i &lt; circuits.length; i++) {
            const element = circuits[i];
            element.setSymbol('i'+(i+1));
            dictCourrant.set('i'+(i+1), element);
        }
        let equations = [];
        this.noeudEq(equations);
        let mailles = [];
        circuitMaille(this.circuit, mailles,[], false, -1);
        for (const maille of mailles) {
            let equation = '0 = '+maille[0].element.getEq(maille[0].sens);
            for (let index = 1; index &lt; maille.length; index++) {
                const obj = maille[index];
                equation +=' + '+obj.element.getEq(obj.sens);
            }
            print(equation)
            equations.push(equation);
        }
        print(equations);
        nerdamer.set('SOLUTIONS_AS_OBJECT', true)
        let reponse = nerdamer.solveEquations(equations);
        for (const symbole in reponse){
            dictCourrant.get(symbole).courrant = reponse[symbole];
        }

    }
    /**
     * Trouve l'équivalent d'un noeud et continue à construire le string pour les calculs
     * @param {*} equations 
     */
    noeudEq(equations){
        for (const element of this.circuit) {
            if(element.getType() == NOEUD){
                let equation = this.symbole +' = ' + element.circuitsEnParallele[0].symbole;
                for (let index = 1; index &lt; element.circuitsEnParallele.length; index++) {
                    const c = element.circuitsEnParallele[index];
                    equation +=' + '+c.symbole
                    c.noeudEq(equations);
                }
                equations.push(equation);
            }
        }
    }

    /**
     * Construit le circuit avec les différents circuits
     * @param {*} circuits 
     */
    getCircuits(circuits){
        circuits.push(this);
        for (const element of this.circuit) {
            if(element.getType() == NOEUD){
                for (const branch of element.circuitsEnParallele) {
                    branch.getCircuits(circuits);
                }
            }
        }
    }
    
}

/**
 * Traverse le circuit pour trouver les mailles de celui-ci (voir lois des mailles ou boucles)
 * @param {Array} composants Liste des composants d'un circuit
 * @param {Array} mailles Liste de mailles qui va enregistrer les mailles au fur et à mesure de
   * l'itération dans la branche ou noeud.
 * @param {Array} maille Maille présentement écrite
 */
function circuitMaille(composants, mailles, maille, inverse, indexSeparate){
    for (let i = 0; i &lt; composants.length; i++) {
        const element = composants[i];
        if(element.getType()===NOEUD){
            element.maille(composants, mailles, [...maille], i, inverse);
            return;
        }else {
            let sens = indexSeparate>i ? inverse : !inverse;
            maille.push({element, sens});
        }
    }
    mailles.push(maille);
}</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Sun May 21 2023 23:12:09 GMT-0400 (Eastern Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
